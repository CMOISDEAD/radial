{
  "version": 3,
  "sources": ["../../../src/clipboard-polyfill/builtins/window-globalThis.ts", "../../../src/clipboard-polyfill/builtins/promise-constructor.ts", "../../../src/clipboard-polyfill/promise/polyfill.ts", "../../../src/clipboard-polyfill/promise/set-promise-polyfill-if-needed.ts", "../../../src/clipboard-polyfill/builtins/builtin-globals.ts", "../../../src/clipboard-polyfill/ClipboardItem/data-types.ts", "../../../src/clipboard-polyfill/debug.ts", "../../../src/clipboard-polyfill/strategies/internet-explorer.ts", "../../../src/clipboard-polyfill/strategies/dom.ts", "../../../src/clipboard-polyfill/implementations/write-fallback.ts", "../../../src/clipboard-polyfill/promise/promise-compat.ts", "../../../src/clipboard-polyfill/implementations/text.ts", "../../../src/clipboard-polyfill/ClipboardItem/check.ts", "../../../src/clipboard-polyfill/ClipboardItem/ClipboardItemPolyfill.ts", "../../../src/clipboard-polyfill/ClipboardItem/convert.ts", "../../../src/clipboard-polyfill/implementations/blob.ts", "../../../src/clipboard-polyfill/entries/es5/overwrite-globals.ts", "../../../src/clipboard-polyfill/entries/es5/overwrite-globals.promise.ts"],
  "sourcesContent": ["export var originalWindow = typeof window === \"undefined\" ? undefined : window;\nexport var originalGlobalThis =\n  typeof globalThis === \"undefined\" ? undefined : globalThis;\n", "import { PromiseConstructor } from \"../promise/es6-promise\";\nimport { originalGlobalThis, originalWindow } from \"./window-globalThis\";\n\nvar promiseConstructorImpl: PromiseConstructor | undefined =\n  (originalWindow as { Promise?: PromiseConstructor } | undefined)?.Promise ??\n  originalGlobalThis?.Promise;\n\n// This must be called *before* `builtin-globals.ts` is imported, or it has no effect.\nexport function setPromiseConstructor(\n  newPromiseConstructorImpl: PromiseConstructor,\n) {\n  promiseConstructorImpl = newPromiseConstructorImpl;\n}\n\nexport function getPromiseConstructor(): PromiseConstructor {\n  if (!promiseConstructorImpl) {\n    throw new Error(\n      \"No `Promise` implementation available for `clipboard-polyfill`. Consider using: https://github.com/lgarron/clipboard-polyfill#flat-file-version-with-promise-included\",\n    );\n  }\n  return promiseConstructorImpl;\n}\n", "import type { PromiseConstructor } from \"./es6-promise\";\n\n/**\n * @this {PromisePolyfill}\n */\nfunction finallyConstructor(callback) {\n  var thisConstructor = this.constructor;\n  return this.then(\n    function (value) {\n      return thisConstructor.resolve(callback()).then(() => {\n        return value;\n      });\n    },\n    function (reason) {\n      return thisConstructor.resolve(callback()).then(() => {\n        return thisConstructor.reject(reason);\n      });\n    },\n  );\n}\n\nfunction allSettled(arr) {\n  var P = this;\n  return new P(function (resolve, reject) {\n    if (!(arr && typeof arr.length !== \"undefined\")) {\n      return reject(\n        new TypeError(\n          // biome-ignore lint/style/useTemplate: Vendored code.\n          typeof arr +\n            \" \" +\n            arr +\n            \" is not iterable(cannot read property Symbol(Symbol.iterator))\",\n        ),\n      );\n    }\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      if (val && (typeof val === \"object\" || typeof val === \"function\")) {\n        var then = val.then;\n        if (typeof then === \"function\") {\n          then.call(\n            val,\n            function (val) {\n              res(i, val);\n            },\n            function (e) {\n              args[i] = { status: \"rejected\", reason: e };\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            },\n          );\n          return;\n        }\n      }\n      args[i] = { status: \"fulfilled\", value: val };\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n}\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction isArray(x) {\n  return Boolean(x && typeof x.length !== \"undefined\");\n}\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function () {\n    // biome-ignore lint/style/noArguments: Vendored code.\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\n\nexport function PromisePolyfill(fn) {\n  if (!(this instanceof PromisePolyfill))\n    throw new TypeError(\"Promises must be constructed via new\");\n  if (typeof fn !== \"function\") throw new TypeError(\"not a function\");\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {PromisePolyfill|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    // biome-ignore lint/style/noParameterAssign: Inherited from library code.\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  PromisePolyfill._immediateFn(function () {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError(\"A promise cannot be resolved with itself.\");\n    if (\n      newValue &&\n      (typeof newValue === \"object\" || typeof newValue === \"function\")\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof PromisePolyfill) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === \"function\") {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    PromisePolyfill._immediateFn(function () {\n      if (!self._handled) {\n        PromisePolyfill._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === \"function\" ? onFulfilled : null;\n  this.onRejected = typeof onRejected === \"function\" ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function (value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function (reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      },\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromisePolyfill.prototype[\"catch\"] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromisePolyfill.prototype.then = function (onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromisePolyfill.prototype[\"finally\"] = finallyConstructor;\n\nPromisePolyfill.all = function (arr) {\n  return new PromisePolyfill(function (resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError(\"Promise.all accepts an array\"));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === \"object\" || typeof val === \"function\")) {\n          var then = val.then;\n          if (typeof then === \"function\") {\n            then.call(\n              val,\n              function (val) {\n                res(i, val);\n              },\n              reject,\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromisePolyfill.allSettled = allSettled;\n\nPromisePolyfill.resolve = function (value) {\n  if (\n    value &&\n    typeof value === \"object\" &&\n    value.constructor === PromisePolyfill\n  ) {\n    return value;\n  }\n\n  return new PromisePolyfill(function (resolve) {\n    resolve(value);\n  });\n};\n\nPromisePolyfill.reject = function (value) {\n  return new PromisePolyfill(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromisePolyfill.race = function (arr) {\n  return new PromisePolyfill(function (resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError(\"Promise.race accepts an array\"));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      PromisePolyfill.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromisePolyfill._immediateFn =\n  // @ts-ignore\n  (typeof setImmediate === \"function\" &&\n    function (fn) {\n      // @ts-ignore\n      setImmediate(fn);\n    }) ||\n  function (fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromisePolyfill._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== \"undefined\" && console) {\n    console.warn(\"Possible Unhandled Promise Rejection:\", err); // eslint-disable-line no-console\n  }\n};\n\nexport var PromisePolyfillConstructor: PromiseConstructor =\n  PromisePolyfill as any as PromiseConstructor;\n\n// Set the Promise polyfill before getting globals.\nimport { setPromiseConstructor } from \"../builtins/promise-constructor\";\nsetPromiseConstructor(PromisePolyfillConstructor);\n", "import { setPromiseConstructor } from \"../builtins/promise-constructor\";\nimport { originalWindow } from \"../builtins/window-globalThis\";\nimport { PromisePolyfillConstructor } from \"./polyfill\";\n\noriginalWindow?.Promise || setPromiseConstructor(PromisePolyfillConstructor);\n", "// We cache the references so that callers can do the following without causing infinite recursion/bugs:\n//\n//     import * as clipboard from \"clipboard-polyfill\";\n//     navigator.clipboard = clipboard;\n//\n//     import { ClipboardItem } from \"clipboard-polyfill\";\n//     window.ClipboardItem = clipboard;\n//\n// Note that per the spec:\n//\n// - is *not* possible to overwrite `navigator.clipboard`. https://www.w3.org/TR/clipboard-apis/#navigator-interface\n// - it *may* be possible to overwrite `window.ClipboardItem`.\n//\n// Chrome 83 and Safari 13.1 match this. We save the original\n// `navigator.clipboard` anyhow, because 1) it doesn't cost more code (in fact,\n// it probably saves code), and 2) just in case an unknown/future implementation\n// allows overwriting `navigator.clipboard` like this.\n\nimport type { PromiseConstructor } from \"../promise/es6-promise\";\nimport { originalWindow } from \"./window-globalThis\";\n\nimport {\n  ClipboardItemConstructor,\n  ClipboardEventTarget,\n  ClipboardItems,\n} from \"../ClipboardItem/spec\";\nimport { getPromiseConstructor } from \"./promise-constructor\";\n\nvar originalNavigator =\n  typeof navigator === \"undefined\" ? undefined : navigator;\nvar originalNavigatorClipboard: ClipboardEventTarget | undefined =\n  originalNavigator?.clipboard as any;\nexport var originalNavigatorClipboardRead:\n  | (() => Promise<ClipboardItems>)\n  | undefined = originalNavigatorClipboard?.read?.bind(\n  originalNavigatorClipboard,\n);\nexport var originalNavigatorClipboardReadText:\n  | (() => Promise<string>)\n  | undefined = originalNavigatorClipboard?.readText?.bind(\n  originalNavigatorClipboard,\n);\nexport var originalNavigatorClipboardWrite:\n  | ((data: ClipboardItems) => Promise<void>)\n  | undefined = originalNavigatorClipboard?.write?.bind(\n  originalNavigatorClipboard,\n);\nexport var originalNavigatorClipboardWriteText:\n  | ((data: string) => Promise<void>)\n  | undefined = originalNavigatorClipboard?.writeText?.bind(\n  originalNavigatorClipboard,\n);\n\n// The spec specifies that this goes on `window`, not e.g. `globalThis`. It's not (currently) available in workers.\nexport var originalWindowClipboardItem: ClipboardItemConstructor | undefined =\n  originalWindow?.ClipboardItem;\n\nexport var promiseConstructor: PromiseConstructor = getPromiseConstructor();\n", "export var TEXT_PLAIN = \"text/plain\";\nexport var TEXT_HTML = \"text/html\";\n", "/******** Debug Logging ********/\n\n// tslint:disable-next-line: no-empty\nvar debugLogImpl = (s: string) => {};\n\nexport function debugLog(s: string) {\n  debugLogImpl(s);\n}\n\nexport function setDebugLog(logFn: (s: string) => void) {\n  debugLogImpl = logFn;\n}\n\n/******** Warnings ********/\n\nvar showWarnings = true;\n\nexport function suppressWarnings() {\n  showWarnings = false;\n}\n\nexport function shouldShowWarnings(): boolean {\n  return showWarnings;\n}\n\n// Workaround for:\n// - IE9 (can't bind console functions directly), and\n// - Edge Issue #14495220 (referencing `console` without F12 Developer Tools can cause an exception)\nfunction warnOrLog() {\n  // biome-ignore lint/style/noArguments: `arguments` is ES5-compatible.\n  (console.warn || console.log).apply(console, arguments);\n}\n\nexport var warn = warnOrLog.bind(\"[clipboard-polyfill]\");\n", "import { originalWindow } from \"../builtins/window-globalThis\";\nimport { debugLog } from \"../debug\";\n\ninterface IEWindow extends Window {\n  clipboardData?: {\n    setData: (key: string, value: string) => boolean;\n    // Always results in a string: https://msdn.microsoft.com/en-us/library/ms536436(v=vs.85).aspx\n    getData: (key: string) => string;\n  };\n}\n\nvar ieWindow = originalWindow as IEWindow;\n\nexport function seemToBeInIE(): boolean {\n  return (\n    typeof ClipboardEvent === \"undefined\" &&\n    typeof ieWindow?.clipboardData !== \"undefined\" &&\n    typeof ieWindow?.clipboardData.setData !== \"undefined\"\n  );\n}\n\nexport function writeTextIE(text: string): boolean {\n  if (!ieWindow.clipboardData) {\n    return false;\n  }\n  // IE supports text or URL, but not HTML: https://msdn.microsoft.com/en-us/library/ms536744(v=vs.85).aspx\n  // TODO: Write URLs to `text/uri-list`? https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types\n  var success = ieWindow.clipboardData.setData(\"Text\", text);\n  if (success) {\n    debugLog(\"writeTextIE worked\");\n  }\n  return success;\n}\n\n// Returns \"\" if the read failed, e.g. because the user rejected the permission.\nexport function readTextIE(): string {\n  if (!ieWindow.clipboardData) {\n    throw new Error(\"Cannot read IE clipboard Data \");\n  }\n  var text = ieWindow.clipboardData.getData(\"Text\");\n  if (text === \"\") {\n    throw new Error(\n      \"Empty clipboard or could not read plain text from clipboard\",\n    );\n  }\n  return text;\n}\n", "import { StringItem } from \"../ClipboardItem/convert\";\nimport { TEXT_PLAIN } from \"../ClipboardItem/data-types\";\nimport { debugLog } from \"../debug\";\n\n/******** Implementations ********/\n\ninterface FallbackTracker {\n  success: boolean;\n}\n\nfunction copyListener(\n  tracker: FallbackTracker,\n  data: StringItem,\n  e: ClipboardEvent,\n): void {\n  debugLog(\"listener called\");\n  tracker.success = true;\n  // tslint:disable-next-line: forin\n  for (var type in data) {\n    var value = data[type];\n    // biome-ignore lint/style/noNonNullAssertion: We assume the data is present if the listener was called.\n    var clipboardData = e.clipboardData!;\n    clipboardData.setData(type, value);\n    if (type === TEXT_PLAIN && clipboardData.getData(type) !== value) {\n      debugLog(\"setting text/plain failed\");\n      tracker.success = false;\n    }\n  }\n  e.preventDefault();\n}\n\nexport function execCopy(data: StringItem): boolean {\n  var tracker: FallbackTracker = { success: false };\n  var listener = copyListener.bind(this, tracker, data);\n\n  document.addEventListener(\"copy\", listener);\n  try {\n    // We ignore the return value, since FallbackTracker tells us whether the\n    // listener was called. It seems that checking the return value here gives\n    // us no extra information in any browser.\n    document.execCommand(\"copy\");\n  } finally {\n    document.removeEventListener(\"copy\", listener);\n  }\n  return tracker.success;\n}\n\n// Temporarily select a DOM element, so that `execCommand()` is not rejected.\nexport function copyUsingTempSelection(\n  e: HTMLElement,\n  data: StringItem,\n): boolean {\n  selectionSet(e);\n  var success = execCopy(data);\n  selectionClear();\n  return success;\n}\n\n// Create a temporary DOM element to select, so that `execCommand()` is not\n// rejected.\nexport function copyUsingTempElem(data: StringItem): boolean {\n  var tempElem = document.createElement(\"div\");\n  // Setting an individual property does not support `!important`, so we set the\n  // whole style instead of just the `-webkit-user-select` property.\n  tempElem.setAttribute(\"style\", \"-webkit-user-select: text !important\");\n  // Place some text in the elem so that Safari has something to select.\n  tempElem.textContent = \"temporary element\";\n  document.body.appendChild(tempElem);\n\n  var success = copyUsingTempSelection(tempElem, data);\n\n  document.body.removeChild(tempElem);\n  return success;\n}\n\n// Uses shadow DOM.\nexport function copyTextUsingDOM(str: string): boolean {\n  debugLog(\"copyTextUsingDOM\");\n\n  var tempElem = document.createElement(\"div\");\n  // Setting an individual property does not support `!important`, so we set the\n  // whole style instead of just the `-webkit-user-select` property.\n  tempElem.setAttribute(\"style\", \"-webkit-user-select: text !important\");\n  // Use shadow DOM if available.\n  var spanParent: Node = tempElem;\n  if (tempElem.attachShadow) {\n    debugLog(\"Using shadow DOM.\");\n    spanParent = tempElem.attachShadow({ mode: \"open\" });\n  }\n\n  var span = document.createElement(\"span\");\n  span.innerText = str;\n\n  spanParent.appendChild(span);\n  document.body.appendChild(tempElem);\n  selectionSet(span);\n\n  var result = document.execCommand(\"copy\");\n\n  selectionClear();\n  document.body.removeChild(tempElem);\n\n  return result;\n}\n\n/******** Selection ********/\n\nfunction selectionSet(elem: Element): void {\n  var sel = document.getSelection();\n  if (sel) {\n    var range = document.createRange();\n    range.selectNodeContents(elem);\n    sel.removeAllRanges();\n    sel.addRange(range);\n  }\n}\n\nfunction selectionClear(): void {\n  var sel = document.getSelection();\n  if (sel) {\n    sel.removeAllRanges();\n  }\n}\n", "import { StringItem } from \"../ClipboardItem/convert\";\nimport { TEXT_PLAIN } from \"../ClipboardItem/data-types\";\nimport { debugLog } from \"../debug\";\nimport {\n  copyTextUsingDOM,\n  copyUsingTempElem,\n  copyUsingTempSelection,\n  execCopy,\n} from \"../strategies/dom\";\nimport { seemToBeInIE, writeTextIE } from \"../strategies/internet-explorer\";\n\n// Note: the fallback order is carefully tuned for compatibility. It might seem\n// safe to move some of them around, but do not do so without testing all browsers.\nexport function writeFallback(stringItem: StringItem): boolean {\n  var hasTextPlain = TEXT_PLAIN in stringItem;\n\n  // Internet Explorer\n  if (seemToBeInIE()) {\n    if (!hasTextPlain) {\n      throw new Error(\"No `text/plain` value was specified.\");\n    }\n    if (writeTextIE(stringItem[TEXT_PLAIN])) {\n      return true;\n    } else {\n      throw new Error(\"Copying failed, possibly because the user rejected it.\");\n    }\n  }\n\n  if (execCopy(stringItem)) {\n    debugLog(\"regular execCopy worked\");\n    return true;\n  }\n\n  // Success detection on Edge is not possible, due to bugs in all 4\n  // detection mechanisms we could try to use. Assume success.\n  if (navigator.userAgent.indexOf(\"Edge\") > -1) {\n    debugLog('UA \"Edge\" => assuming success');\n    return true;\n  }\n\n  // Fallback 1 for desktop Safari.\n  if (copyUsingTempSelection(document.body, stringItem)) {\n    debugLog(\"copyUsingTempSelection worked\");\n    return true;\n  }\n\n  // Fallback 2 for desktop Safari.\n  if (copyUsingTempElem(stringItem)) {\n    debugLog(\"copyUsingTempElem worked\");\n    return true;\n  }\n\n  // Fallback for iOS Safari.\n  if (copyTextUsingDOM(stringItem[TEXT_PLAIN])) {\n    debugLog(\"copyTextUsingDOM worked\");\n    return true;\n  }\n\n  return false;\n}\n", "import { promiseConstructor } from \"../builtins/builtin-globals\";\n\nexport function promiseRecordMap<T>(\n  keys: readonly string[],\n  f: (key: string) => Promise<T>,\n): Promise<Record<string, T>> {\n  var promiseList: Promise<T>[] = [];\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    promiseList.push(f(key));\n  }\n  return promiseConstructor\n    .all(promiseList)\n    .then((vList: T[]): Record<string, T> => {\n      var dataOut: Record<string, T> = {};\n      for (var i = 0; i < keys.length; i++) {\n        dataOut[keys[i]] = vList[i];\n      }\n      return dataOut;\n    });\n}\n\nexport var voidPromise: Promise<void> = promiseConstructor.resolve();\nexport var truePromiseFn: () => Promise<boolean> = () =>\n  promiseConstructor.resolve(true);\nexport var falsePromise: Promise<boolean> = promiseConstructor.resolve(false);\n\nexport function rejectThrownErrors<T>(executor: () => Promise<T>): Promise<T> {\n  return new promiseConstructor((resolve, reject) => {\n    try {\n      resolve(executor());\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n", "import { StringItem } from \"../ClipboardItem/convert\";\nimport { TEXT_PLAIN } from \"../ClipboardItem/data-types\";\nimport { debugLog } from \"../debug\";\nimport {\n  originalNavigatorClipboardReadText,\n  originalNavigatorClipboardWriteText,\n  promiseConstructor,\n} from \"../builtins/builtin-globals\";\nimport { readTextIE, seemToBeInIE } from \"../strategies/internet-explorer\";\nimport { writeFallback } from \"./write-fallback\";\nimport { rejectThrownErrors } from \"../promise/promise-compat\";\n\nfunction stringToStringItem(s: string): StringItem {\n  var stringItem: StringItem = {};\n  stringItem[TEXT_PLAIN] = s;\n  return stringItem;\n}\n\nexport function writeText(s: string): Promise<void> {\n  // Use the browser implementation if it exists.\n  if (originalNavigatorClipboardWriteText) {\n    debugLog(\"Using `navigator.clipboard.writeText()`.\");\n    return originalNavigatorClipboardWriteText(s).catch((e) => {\n      writeTextStringFallbackPromise(s);\n    });\n  }\n  return writeTextStringFallbackPromise(s);\n}\n\nfunction writeTextStringFallbackPromise(s: string): Promise<void> {\n  return rejectThrownErrors(() =>\n    promiseConstructor.resolve(writeTextStringFallback(s)),\n  );\n}\n\nfunction writeTextStringFallback(s: string): void {\n  if (!writeFallback(stringToStringItem(s))) {\n    throw new Error(\"writeText() failed\");\n  }\n}\n\nexport function readText(): Promise<string> {\n  return rejectThrownErrors(() => {\n    // Use the browser implementation if it exists.\n    if (originalNavigatorClipboardReadText) {\n      debugLog(\"Using `navigator.clipboard.readText()`.\");\n      return originalNavigatorClipboardReadText();\n    }\n\n    // Fallback for IE.\n    if (seemToBeInIE()) {\n      var result = readTextIE();\n      return promiseConstructor.resolve(result);\n    }\n\n    throw new Error(\"Read is not supported in your browser.\");\n  });\n}\n", "import { ClipboardItemInterface } from \"./spec\";\n\nexport function hasItemWithType(\n  clipboardItems: ClipboardItemInterface[],\n  typeName: string,\n): boolean {\n  for (var i = 0; i < clipboardItems.length; i++) {\n    var item = clipboardItems[i];\n    if (item.types.indexOf(typeName) !== -1) {\n      return true;\n    }\n  }\n  return false;\n}\n", "import { promiseConstructor } from \"../builtins/builtin-globals\";\nimport { stringToBlob } from \"./convert\";\nimport {\n  ClipboardItemConstructor,\n  ClipboardItemDataType,\n  ClipboardItemInterface,\n  ClipboardItemOptions,\n} from \"./spec\";\n\nfunction ClipboardItemPolyfillImpl(\n  // TODO: The spec specifies values as `ClipboardItemData`, but\n  // implementations (e.g. Chrome 83) seem to assume `ClipboardItemDataType`\n  // values. https://github.com/w3c/clipboard-apis/pull/126\n  items: { [type: string]: ClipboardItemDataType },\n  options?: ClipboardItemOptions,\n): ClipboardItemInterface {\n  var types = Object.keys(items);\n  var _items: { [type: string]: Blob } = {};\n  // biome-ignore lint/suspicious/noRedeclare: This is a false positive from Biome. https://github.com/biomejs/biome/issues/175\n  for (var type in items) {\n    var item = items[type];\n    if (typeof item === \"string\") {\n      _items[type] = stringToBlob(type, item);\n    } else {\n      _items[type] = item;\n    }\n  }\n  // The explicit default for `presentationStyle` is \"unspecified\":\n  // https://www.w3.org/TR/clipboard-apis/#clipboard-interface\n  var presentationStyle = options?.presentationStyle ?? \"unspecified\";\n\n  function getType(type: string): Promise<Blob> {\n    return promiseConstructor.resolve(_items[type]);\n  }\n  return {\n    types: types,\n    presentationStyle: presentationStyle,\n    getType: getType,\n  };\n}\n\nexport var ClipboardItemPolyfill: ClipboardItemConstructor =\n  ClipboardItemPolyfillImpl as any as ClipboardItemConstructor;\n", "import { ClipboardItemPolyfill } from \"./ClipboardItemPolyfill\";\nimport { TEXT_PLAIN } from \"./data-types\";\nimport { ClipboardItemInterface, ClipboardItemOptions } from \"./spec\";\nimport {\n  promiseConstructor,\n  originalWindowClipboardItem,\n} from \"../builtins/builtin-globals\";\nimport { promiseRecordMap } from \"../promise/promise-compat\";\n\nexport function stringToBlob(type: string, str: string): Blob {\n  return new Blob([str], {\n    type,\n  });\n}\n\nexport function blobToString(blob: Blob): Promise<string> {\n  return new promiseConstructor((resolve, reject) => {\n    var fileReader = new FileReader();\n    fileReader.addEventListener(\"load\", () => {\n      var result = fileReader.result;\n      if (typeof result === \"string\") {\n        resolve(result);\n      } else {\n        reject(\"could not convert blob to string\");\n      }\n    });\n    fileReader.readAsText(blob);\n  });\n}\n\nexport function clipboardItemToGlobalClipboardItem(\n  clipboardItem: ClipboardItemInterface,\n): Promise<ClipboardItemInterface> {\n  // Note that we use `Blob` instead of `ClipboardItemDataType`. This is because\n  // Chrome 83 can only accept `Blob` (not `string`). The return value of\n  // `getType()` is already `Blob` per the spec, so this is simple for us.\n  return promiseRecordMap(clipboardItem.types, function (type: string) {\n    return clipboardItem.getType(type);\n  }).then((items: Record<string, Blob>) => {\n    return new promiseConstructor((resolve, reject) => {\n      var options: ClipboardItemOptions = {};\n      if (clipboardItem.presentationStyle) {\n        options.presentationStyle = clipboardItem.presentationStyle;\n      }\n      if (originalWindowClipboardItem) {\n        resolve(new originalWindowClipboardItem(items, options));\n      } else {\n        reject(\"window.ClipboardItem is not defined\");\n      }\n    });\n  });\n}\n\nexport function textToClipboardItem(text: string): ClipboardItemInterface {\n  var items: { [type: string]: Blob } = {};\n  items[TEXT_PLAIN] = stringToBlob(text, TEXT_PLAIN);\n  return new ClipboardItemPolyfill(items);\n}\n\nexport function getTypeAsString(\n  clipboardItem: ClipboardItemInterface,\n  type: string,\n): Promise<string> {\n  return clipboardItem.getType(type).then((text: Blob) => {\n    return blobToString(text);\n  });\n}\n\nexport interface StringItem {\n  [type: string]: string;\n}\n\nexport function toStringItem(\n  data: ClipboardItemInterface,\n): Promise<StringItem> {\n  return promiseRecordMap(data.types, function (type: string) {\n    return getTypeAsString(data, type);\n  });\n}\n", "import { hasItemWithType } from \"../ClipboardItem/check\";\nimport {\n  clipboardItemToGlobalClipboardItem,\n  toStringItem,\n  textToClipboardItem,\n  StringItem,\n} from \"../ClipboardItem/convert\";\nimport { TEXT_HTML, TEXT_PLAIN } from \"../ClipboardItem/data-types\";\nimport { ClipboardItemInterface, ClipboardItems } from \"../ClipboardItem/spec\";\nimport { debugLog, shouldShowWarnings } from \"../debug\";\nimport {\n  promiseConstructor,\n  originalNavigatorClipboardRead,\n  originalNavigatorClipboardWrite,\n  originalWindowClipboardItem,\n} from \"../builtins/builtin-globals\";\nimport {\n  falsePromise,\n  rejectThrownErrors,\n  truePromiseFn,\n  voidPromise,\n} from \"../promise/promise-compat\";\nimport { readText } from \"./text\";\nimport { writeFallback } from \"./write-fallback\";\n\nexport function write(data: ClipboardItemInterface[]): Promise<void> {\n  // Use the browser implementation if it exists.\n  // TODO: detect `text/html`.\n  return rejectThrownErrors((): Promise<boolean> => {\n    if (originalNavigatorClipboardWrite && originalWindowClipboardItem) {\n      // TODO: This reference is a workaround for TypeScript inference.\n      var originalNavigatorClipboardWriteCached =\n        originalNavigatorClipboardWrite;\n      debugLog(\"Using `navigator.clipboard.write()`.\");\n      return promiseConstructor\n        .all(data.map(clipboardItemToGlobalClipboardItem))\n        .then(\n          (\n            globalClipboardItems: ClipboardItemInterface[],\n          ): Promise<boolean> => {\n            return originalNavigatorClipboardWriteCached(globalClipboardItems)\n              .then(truePromiseFn)\n              .catch((e: Error): Promise<boolean> => {\n                // Chrome 83 will throw a DOMException or NotAllowedError because it doesn't support e.g. `text/html`.\n                // We want to fall back to the other strategies in a situation like this.\n                // See https://github.com/w3c/clipboard-apis/issues/128 and https://github.com/w3c/clipboard-apis/issues/67\n                if (\n                  !hasItemWithType(data, TEXT_PLAIN) &&\n                  !hasItemWithType(data, TEXT_HTML)\n                ) {\n                  throw e;\n                }\n                return falsePromise;\n              });\n          },\n        );\n    }\n    return falsePromise;\n  }).then((success: boolean) => {\n    if (success) {\n      return voidPromise;\n    }\n\n    var hasTextPlain = hasItemWithType(data, TEXT_PLAIN);\n    if (shouldShowWarnings() && !hasTextPlain) {\n      debugLog(\n        \"clipboard.write() was called without a \" +\n          \"`text/plain` data type. On some platforms, this may result in an \" +\n          \"empty clipboard. Call suppressWarnings() \" +\n          \"to suppress this warning.\",\n      );\n    }\n\n    return toStringItem(data[0]).then((stringItem: StringItem) => {\n      if (!writeFallback(stringItem)) {\n        throw new Error(\"write() failed\");\n      }\n    });\n  });\n}\n\nexport function read(): Promise<ClipboardItems> {\n  return rejectThrownErrors(() => {\n    // Use the browser implementation if it exists.\n    if (originalNavigatorClipboardRead) {\n      debugLog(\"Using `navigator.clipboard.read()`.\");\n      return originalNavigatorClipboardRead();\n    }\n\n    // Fallback to reading text only.\n    return readText().then((text: string) => {\n      return [textToClipboardItem(text)];\n    });\n  });\n}\n", "import { readText, writeText } from \"../../implementations/text\";\nimport { read, write } from \"../../implementations/blob\";\nimport { ClipboardItemPolyfill } from \"../../ClipboardItem/ClipboardItemPolyfill\";\n\n// Create the `navigator.clipboard` object if it doesn't exist.\nif (!navigator.clipboard) {\n  (navigator as any).clipboard = {};\n}\n\n// Set/replace the implementations.\nnavigator.clipboard.read = read;\nnavigator.clipboard.readText = readText;\nnavigator.clipboard.write = write;\nnavigator.clipboard.writeText = writeText;\n\nwindow.ClipboardItem = ClipboardItemPolyfill;\n", "// Set the Promise polyfill before globals.\nimport \"../../promise/set-promise-polyfill-if-needed\";\n// Import `./globals` that the globals are cached before this runs.\nimport \"../../builtins/builtin-globals\";\n\nimport { PromisePolyfillConstructor } from \"../../promise/polyfill\";\n\nimport \"./overwrite-globals\";\n\n(window as any).Promise = PromisePolyfillConstructor;\n"],
  "mappings": "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",
  "names": ["resolve", "reject", "i", "val", "_a", "_a", "i", "resolve", "reject", "_a", "type", "resolve", "reject"]
}
